{% extends "base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block content %}

    {% if not user_can_continue %}

    <div class='col-sm-6'>
        <p class='lead'>Continue as Guest</p>
        <form action="" method="POST">{% csrf_token %}
            {{ form|crispy }}
            <input type="submit" class="btn btn-success" value="Continue as Guest" />
        </form>
    </div>

    <div class='col-sm-6'>
        <p class='lead'>Login to continue</p>
        <form method='POST' action='{% url 'auth_login' %}'>
            {% csrf_token %}
            {{ login_form|crispy }}
            <input type="hidden" name="next" value="{{ next_url }}" />
            <input type="submit" class='btn btn-success' value="Login" />
        </form>

        <p class='text-center'>
            <p>{% trans 'Forgot password' %}? <a href="{% url 'auth_password_reset' %}">{% trans 'Reset password' %}</a>!</p>
            <p>{% trans 'Not member' %}? <a href="{% url 'registration_register' %}">{% trans 'Register' %}</a>!</p>
        </p>
    </div>

    {% else %}
        <div class='col-sm-4 col-sm-offset-4 text-center'>
        <p class='lead'>Your Order</p>
        <table class="table table-hover">
            <tr>
                <td>{{ order.cart.cartitem_set.count }} Item(s): 
                        </br>
                        {% for item in order.cart.cartitem_set.all %}
                            <b>{{ item.item.get_title }}</b>
                        {% endfor %}
                        </br>
            </td>
            </tr>
            <tr><td>Cart Subtotal: {{ order.cart.subtotal }}</td></tr>
            <tr><td>Tax: {{ order.cart.tax_total }}</td></tr>
            <tr><td>Items total: {{ order.cart.total }}</td></tr>
            <tr><td>Shipping: {{ order.shipping_total_price }}</td></tr>
            <tr><td>Order total: {{ order.order_total }}</td></tr>
        </table>
        </div>

    {% endif %}

{% endblock content %}
